(function(e,t){if(typeof define==="function"&&define.amd){define(["jquery"],t)}else{t(e.jQuery)}})(this,function(e){"use strict";var t,n={friction:.5},r=e(window),i=0;window.requestAnimationFrame=function(e,t){var n=(new Date).getTime();var r=Math.max(0,5-(n-i));var s=window.setTimeout(function(){e(n+r)},r);i=n+r;return s};parallaxScroll=function(t,i){return{init:function(){this.$background=e(t);this.settings=e.extend({},n,i);this._initStyles();this._bindEvents()},_initStyles:function(){this.$background.css({"background-attachment":"scroll"})},_visibleInViewport:function(){var e=r.height();var t=this.$background.get(0).getBoundingClientRect();return t.top<e&&t.bottom>0||t.bottom<=e&&t.top>e},_bindEvents:function(){var e=this;r.on("load scroll resize",function(t){e._requestTick()})},_requestTick:function(){var e=this;if(!this.ticking){this.ticking=true;requestAnimationFrame(function(){e._updateBgPos()})}},_updateBgPos:function(){if(this._visibleInViewport()){var e=r.width();var t=r.height();var n=this.$background.data("width");var i=this.$background.data("height");var s=n/i;var o=this.$background.width();var u=this.$background.height();var a=o/u;var f=a<s;var l=o/n;var c=i*l;var h=this.$background.offset().top;var p=r.scrollTop();var d=p-h;var v=t+c;var m=d*(t/v);var g=d/t;var y=(t-u)/2;y=f?y*g:y;var b=f?this.settings.friction*a*2:this.settings.friction*a;var w=f?"auto "+t+"px":e+"px auto";var E=m*b-y;this.$background.css({"background-size":w,"background-position":"50% "+E+"px"})}this.ticking=false}}};t.defaults=n;e.fn.parallaxScroll=function(e){return this.each(function(){(new t(this,e)).init()})};return t})